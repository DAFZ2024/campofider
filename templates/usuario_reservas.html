{% extends "base.html" %}

{% block title %}Mis Reservas - Campo Finder{% endblock %}

{% block content %}
<div class="min-h-screen py-6 px-4 sm:py-8 sm:px-6 relative">
    <!-- Animated Background Elements (hidden on small screens) -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none hidden md:block">
        <div class="absolute top-20 -left-32 w-96 h-96 bg-primary-500/5 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-20 -right-32 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
    </div>

    <div class="max-w-7xl mx-auto relative z-10">
        <!-- Breadcrumb -->
        <div class="mb-6">
            <nav class="flex items-center gap-2 text-sm">
                <a href="{{ url_for('dashboard_usuario') }}" class="text-gray-400 hover:text-white transition-colors flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    Dashboard
                </a>
                <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
                <span class="text-white font-semibold">Mis Reservas</span>
            </nav>
        </div>

        <!-- Header -->
        <div class="mb-10">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <div class="absolute -inset-1 bg-gradient-to-r from-primary-600 to-purple-600 rounded-xl blur opacity-30"></div>
                        <div class="relative w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-br from-primary-500/20 to-purple-500/20 flex items-center justify-center border border-primary-500/30">
                            <svg class="w-6 h-6 sm:w-8 sm:h-8 text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                    </div>
                    <div>
                        <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-primary-100 to-white">
                            Mis Reservas
                        </h1>
                        <p class="text-gray-300 font-medium mt-1">Historial de tus partidos y próximos encuentros</p>
                    </div>
                </div>
                <a href="{{ url_for('usuario_explorar') }}" class="inline-flex items-center gap-2 px-6 py-3 bg-white/[0.05] hover:bg-white/[0.1] text-white rounded-xl text-sm font-bold transition-all border border-white/10 hover:border-white/20">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    Nueva Reserva
                </a>
            </div>
        </div>

        <!-- Tabs Navigation -->
        <div class="flex justify-center mb-8" x-data="{ activeTab: 'pendientes' }">
            <div class="bg-white/[0.05] p-1 rounded-xl inline-flex border border-white/10">
                <button onclick="switchTab('pendientes')" id="tab-pendientes" class="px-6 py-2.5 rounded-lg text-sm font-bold transition-all duration-300 bg-primary-600 text-white shadow-lg shadow-primary-900/20">
                    Pendientes
                </button>
                <button onclick="switchTab('completadas')" id="tab-completadas" class="px-6 py-2.5 rounded-lg text-sm font-bold transition-all duration-300 text-gray-400 hover:text-white hover:bg-white/[0.05]">
                    Completadas
                </button>
            </div>
        </div>

        <!-- Contenedor de Reservas Pendientes -->
        <div id="content-pendientes" class="space-y-6 transition-all duration-300">
            {% set pendientes = [] %}
            {% for r in reservas %}
                {% if r[9] == 'pendiente' %}
                    {% set _ = pendientes.append(r) %}
                {% endif %}
            {% endfor %}

            {% if pendientes|length > 0 %}
                {% for reserva in pendientes %}
                    {% include 'partials/reserva_card.html' %}
                {% endfor %}
            {% else %}
                <div class="flex flex-col items-center justify-center py-12 bg-white/[0.03] rounded-2xl border border-white/10">
                    <div class="w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4">
                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">No tienes reservas pendientes</h3>
                    <p class="text-gray-400 text-sm">Tus próximas reservas aparecerán aquí</p>
                </div>
            {% endif %}
        </div>

        <!-- Contenedor de Reservas Completadas -->
        <div id="content-completadas" class="space-y-6 hidden transition-all duration-300">
            {% set completadas = [] %}
            {% for r in reservas %}
                {% if r[9] == 'completada' %}
                    {% set _ = completadas.append(r) %}
                {% endif %}
            {% endfor %}

            {% if completadas|length > 0 %}
                {% for reserva in completadas %}
                    {% include 'partials/reserva_card.html' %}
                {% endfor %}
            {% else %}
                <div class="flex flex-col items-center justify-center py-12 bg-white/[0.03] rounded-2xl border border-white/10">
                    <div class="w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4">
                        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">No tienes reservas completadas</h3>
                    <p class="text-gray-400 text-sm">Tus reservas pasadas aparecerán aquí</p>
                </div>
            {% endif %}
        </div>

        <script>
            function switchTab(tab) {
                // Botones
                const btnPendientes = document.getElementById('tab-pendientes');
                const btnCompletadas = document.getElementById('tab-completadas');
                
                // Contenidos
                const contentPendientes = document.getElementById('content-pendientes');
                const contentCompletadas = document.getElementById('content-completadas');
                
                // Clases activas e inactivas para botones
                const activeClasses = ['bg-primary-600', 'text-white', 'shadow-lg', 'shadow-primary-900/20'];
                const inactiveClasses = ['text-gray-400', 'hover:text-white', 'hover:bg-white/[0.05]'];
                
                if (tab === 'pendientes') {
                    // Activar Pendientes
                    btnPendientes.classList.add(...activeClasses);
                    btnPendientes.classList.remove(...inactiveClasses);
                    contentPendientes.classList.remove('hidden');
                    
                    // Desactivar Completadas
                    btnCompletadas.classList.remove(...activeClasses);
                    btnCompletadas.classList.add(...inactiveClasses);
                    contentCompletadas.classList.add('hidden');
                } else {
                    // Activar Completadas
                    btnCompletadas.classList.add(...activeClasses);
                    btnCompletadas.classList.remove(...inactiveClasses);
                    contentCompletadas.classList.remove('hidden');
                    
                    // Desactivar Pendientes
                    btnPendientes.classList.remove(...activeClasses);
                    btnPendientes.classList.add(...inactiveClasses);
                    contentPendientes.classList.add('hidden');
                }
            }
        </script>
    </div>
</div>
{% endblock %}
